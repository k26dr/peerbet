<h1>PeerBet</h1>

<p>Peer to peer sports betting on Ethereum. All bets pay out 1:1 with no house cut or rake.</p>

<h3>Today's Games</h3>

<div id="todays-game"></div>

<h3>Past Games</h3>

<script>
loadGames()
async function loadGames() {
  const csv = await fetch('data.csv').then(r => r.text())
  const lines = csv.split('\n');
  const headers = lines[0].split(',');
  const entries = lines.slice(1).map(e => e.split(','));

  // Use west coast time so the games line up with colloquial days
  const today = new Date().toLocaleString("en-US", { 
    timeZone: "America/Los_Angeles",
    year: "numeric",
    month: "long",
    day: "numeric"
  }); 
  console.log(today)
  const todaysGames = entries.filter(e => e[1] == today);
  for (let game of todaysGames) {
    const row = `
      <tr>
        <td>${game[2]}</td>
        <td>${game[3]} (-${game[5]})</td>
        <td>${game[4]}</td>
      </tr>
    `
    document.getElementById('todays-games').innerHTML = document.getElementById('todays-games').innerHTML + row;
  }
}
</script>
